\RequirePackage[no-math]{fontspec}
\special{dvipdfmx:config z 0}
\documentclass[twoside, fontset=fandol, punct=kaiming]{ctexbook}
\usepackage[svgnames]{xcolor}
\usepackage{graphicx}
\ctexset{
    chapter = { 
        name = {章,},
        beforeskip = 1em,
        format = \Large\bfseries$\triangleright~$,
    },
	section = {
	  name = {,},
	  number = \chinese{section},
	  format = \large\bfseries,
	 }
}
\def\setminus{\,\mathord{\mathchar"226E}\,}
\usepackage[b5paper]{geometry}
\usepackage[scr=boondox]{mathalpha}
\usepackage{amsmath,amsfonts,amssymb,amsthm,euscript,fontspec,tocloft,fancyhdr,mathtools,enumitem,pgfplots,tikz-cd,xeCJKfntef}
\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{fixdif}
\usepackage[
    colorlinks,
    linkcolor = DarkTurquoise!60!black,
    anchorcolor = OrangeRed,
    filecolor = OrangeRed,
    urlcolor = OrangeRed,
    citecolor = Teal,
    linktocpage,
    hyperfootnotes = true,
    breaklinks = true,
]{hyperref}

\setlist[enumerate]{itemsep = 0pt, label=\roman*.}
\setlist[itemize]{itemsep = 0pt}
\setmainfont{lmroman10-regular.otf}[
    BoldFont = lmromandemi10-regular.otf,
    ItalicFont = lmroman10-italic.otf,
    SizeFeatures = {
        {Size = {-9}, Font = lmroman8-regular.otf},
        {Size = {9-14}, Font = lmroman10-regular.otf},
        {Size = {14-}, Font = lmroman17-regular.otf}
    } 
]
\setCJKmainfont{FandolSong-Regular.otf}[
    BoldFont = FandolSong-Bold.otf,
    ItalicFont = FandolKai-Regular.otf,
    SizeFeatures={
        {Size={-9}, FakeStretch = 1.05, ItalicFont = FandolKai-Regular.otf},
        {Size={9-}, FakeStretch = 1, ItalicFont = FandolKai-Regular.otf}
    } 
]

\renewcommand\implies{\DOTSB \,\Longrightarrow \,}
\DeclareMathOperator{\dom}{dom}
\newcommand\dif{\mathrel{\triangle}}
\renewcommand{\sectionmark}[1]{\markright {\uppercase{#1}}}
\fancypagestyle{fancy}
{    
    \fancyhead[OR]{\fontspec{lmsansquot8-oblique.otf}[FakeStretch=.85]\itshape\small\rightmark\qquad{\fontspec{lmsans10-boldoblique.otf}\thepage}}
    \fancyhead[LE]{\fontspec{lmsansquot8-oblique.otf}[FakeStretch=.85]\itshape\small{\fontspec{lmsans10-boldoblique.otf}\thepage}\qquad\leftmark}
    \fancyhead[LO,RE]{}
    \fancyfoot[C]{}
    \renewcommand{\headrulewidth}{0pt}
}
\pagestyle{fancy}
\let \mathcal \EuScript
\newlength \circlenumbertemp
\newlength \squarenumbertemp
\newcommand {\circlenumber} [1] {%
    \ifnum #1 > 9
        \circlenumbertemp = 0.18cm
    \else
        \circlenumbertemp = 0.12cm
    \fi
    \hbox{\begin{tikzpicture}[baseline = -.8ex]
        \draw [line width = .3pt] (0,0) circle (0.12);
        \node at(0,0){\makebox[0pt]{\resizebox{\circlenumbertemp}{!}{\textbf{#1}}}};
    \end{tikzpicture}}
}
\newcommand {\squarenumber} [1] {%
    \ifnum #1 > 9
        \squarenumbertemp = 0.18cm
    \else
        \squarenumbertemp = 0.12cm
    \fi
    \hbox{\begin{tikzpicture}[baseline = -.7ex]
        \draw [line width = .3pt, rounded corners = 1pt] (-0.12,-0.12) rectangle (0.12,0.12);
        \node at(0,0){\makebox[0pt]{\resizebox{\squarenumbertemp}{!}{\textbf{#1}}}};
    \end{tikzpicture}}
}
\renewenvironment{quote}{\begin{flushright}\small\kaishu\begin{minipage}{15em}\hspace*{2em}}{\end{minipage}\end{flushright}\medskip}
\makeatletter
\newcommand\fonttemp{\f@size}
\renewcommand\@makefnmark{\@textsuperscript{\scalebox{.8}{\circlenumber{\@thefnmark}}}}
\renewcommand\@makefntext[1]{%
  \hspace*{-2em}%
  \parindent 2em%
  \noindent
  \hb@xt@ 2em{\hss
  \normalfont
  \scalebox{1}[.9]{\circlenumber{\@thefnmark}}~}%
  #1}
\newtheoremstyle{innocent}{}{}
{\rmfamily\kaishu}{}
{\sffamily\bfseries}{}
{ }{\thmname{#1}\thmnumber{ #2}\,\mdseries\rmfamily\thmnote{$\left(\,\mbox{#3}\,\right) $}.~}
\theoremstyle{innocent}
\newtheorem*{theorem}{定理}
\begin{document}

\definecolor{titlegreendark}{HTML}{C1C998}
\begin{titlepage}
    \tikzset{help lines/.style=thick}
    \begin{tikzpicture}[overlay, remember picture]
        \filldraw[fill = titlegreendark!50!white, line width = 0pt, titlegreendark!50!white] (current page.south west) rectangle +(\paperwidth,\paperheight);
        \def\rectanglepath#1{\filldraw[fill = titlegreendark, line width = 0pt, titlegreendark, rotate = 45] #1 rectangle +(3,3);}
        \foreach\i in {-36,-30,...,18}{\foreach\j in {-36,-30,...,18}{\rectanglepath{(\i,\j)}\rectanglepath{(\i+3,\j+3)}}}
        \draw[help lines, step=.3cm, opacity = .02] (-30,-30) grid (30,30);
    \end{tikzpicture}
    \begin{tikzpicture}[overlay, remember picture, opacity = .1]
        \foreach \x in {1,...,500}{
                \pgfmathrandominteger{\a}{-1000}{500}
                \pgfmathrandominteger{\b}{-1000}{500}
                \pgfpathcircle{\pgfpoint{+\a pt}{+\b pt}}{+3pt}
                \color{titlegreendark!70!black}
                \pgfusepath{fill}
            }
        \end{tikzpicture}
    \begin{tikzpicture}[overlay, remember picture]
        \node[opacity = .2] at ([xshift = .5\paperwidth, yshift = -.5\paperheight]current page.north west){
            \includegraphics[width=\paperwidth]{title-bg.png}
        };
        \filldraw [fill = white, opacity = .8, thick] ([xshift = .2\paperwidth, yshift = -.25\paperheight]current page.north west) rectangle ([xshift = -.2\paperwidth, yshift = -.5\paperheight]current page.north east);
        \node at ([xshift = .5\paperwidth, yshift = -.375\paperheight]current page.north west) {\Huge\bfseries \parbox[c]{10em}{\centering 高等实分析引论\\ \bigskip\sffamily\large Gerald B. Folland~~著}};
    \end{tikzpicture}
\end{titlepage}

\input{Prologue}
\input{Chapter 0}

\chapter{拓扑}
本章所述为点集拓扑学, 亦名一般拓扑学, 乃用以探究极限, 连续性及集合相关几何属性的抽象数学框架.

\section{度量空间}
二十世纪初, 数学突飞猛进发展, 抽象性, 普遍性大为提升. 彼时, 数学家开创一系列理论, 可广纳万象, 以探究极限与连续之思, 而此前, 此思想只止于 Euclidean 空间中子集, 或是一元, 多元实或复函数.

基于此, Euclidean 空间最直接的推广乃度量空间, 其乃一非空集合 $X$ 赋予一函数
\[\rho :X\times X\to [0,\infty).\]
(一个度量)满足以下所需:
\begin{enumerate}
    \item 对任意 $x$, $y\in X$, $\rho (x,y)=\rho (y,x)$ 成立;
    \item (三角不等式) 对任意 $x$, $y$, $z\in X$, $\rho (x,z)\leqslant \rho (x,y)+\rho (y,z)$ 成立;
    \item $\rho (x,y)=0$ 当且仅当 $x=y$.
\end{enumerate}
可认为 $\rho (x,y)$ 是 $x$ 至 $y$ 的距离. 称上为``度量空间 $(X,\rho)$'', 若 $\rho $ 自明, 则可用度量空间 $X$ 称之.

举数例辅之:
\begin{itemize}
    \item $X=\mathbb R^n~\textit{中子集}$; $\rho (x,y) = (\sum_{j=1}^n|x_j-y_j|^2)^{1 /2}$ ($x$ 至 $y$ 的 Euclidean 度量).
    \item $X=\mathbb R^3~\textit{中单位球}$; $\rho (x,y) = \text{$x$ 至 $y$ 的大圆距离}$.
    \item $X=\mathbb R^n~\textit{中光滑曲线}$; $\rho (x,y) = \text{$x$ 至 $y$ 对应曲线长度}$. (即, $X$ 是一一 $C^{(1)}$ 映射 $\phi :(a,b)\to \mathbb R^n$ 之像, 使 $x=\phi (s)$, $y=\phi (t)$, 则 $\rho (x,y)=\int_s^t|\psi '|$.)
\end{itemize}


\bibliographystyle{alpha}
\bibliography{cite}
\end{document}
